<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sell</title>
<link rel="stylesheet" href="style.css">

<style>
/* =================== SELL PAGE STYLES =================== */
#stockList li {
  background: #232323;
  padding: 15px;
  border-radius: 12px;
  margin-bottom: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: nowrap; /* üî• Fix misalignment */
  position: relative; /* üî• needed for tooltip */
}

#stockList li > div:first-child {
  flex: 1;
  min-width: 0; /* üî• allow ellipsis to work */
}

#stockList strong {
  font-size: 18px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis; /* üî• long names truncate */
  cursor: default;
}

/* TOOLTIP ON HOVER */
#stockList strong:hover::after {
  content: attr(title);
  white-space: normal;
  background: #2c2c2c;
  color: #fff;
  padding: 4px 8px;
  border-radius: 6px;
  position: absolute;
  top: -5px;
  left: 0;
  z-index: 1000;
  max-width: 300px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.5);
}

/* inner divs and buttons */
#stockList li div {
  display: flex;
  align-items: center;
  gap: 10px;
}

.qty-btn {
  background-color: #2c2c2c;
  color: #fff;
  border: none;
  border-radius: 12px;
  font-size: 20px;
  padding: 10px 15px;
  cursor: pointer;
}

.qty-btn:hover {
  background-color: #00a862;
}

#stockList small {
  color: #aaa;
}

#stockList input {
  color: #fff;
  background: #2c2c2c;
  border: none;
  border-radius: 8px;
  width: 60px;
  text-align: center;
}
</style>
</head>

<body>

<div class="shop-nav">My Shop Name</div>

<div style="padding:20px; max-width:700px; margin:auto; padding-bottom:200px;">

  <!-- BARCODE SCAN INPUT -->
  <input
    type="text"
    id="barcodeInput"
    class="search-bar"
    placeholder="Scan barcode..."
    autocomplete="off"
  >

  <!-- SEARCH BAR (EXISTING) -->
  <input
    type="text"
    id="searchItem"
    class="search-bar"
    placeholder="Search item..."
    onkeyup="searchStock()"
    style="margin-top:10px;"
  >

  <ul id="stockList" style="list-style:none; padding:0; margin-top:15px;"></ul>
</div>

<!-- BOTTOM NAV -->
<div class="bottom-nav">
  <button onclick="location.href='index.html'">üñ•Ô∏èHome</button>
  <button onclick="location.href='add.html'">‚ûï Add</button>
  <button onclick="location.href='sell.html'">üõí Sell</button>
  <button onclick="location.href='history.html'">‚åõStats</button>
</div>

<!-- CART BAR -->
<div id="cartBar" style="
  position: fixed;
  bottom: 70px;
  left: 50%;
  transform: translateX(-50%);
  width: 90%;
  max-width: 700px;
  background: #00a862;
  color: #000;
  padding: 12px 16px;
  border-radius: 14px;
  display: none;
  justify-content: space-between;
  align-items: center;
  font-weight: bold;
  z-index: 1000;
">
  <span id="cartInfo">0 items | ‚Çπ0</span>
  <button onclick="goToCart()" style="
    background:#000;
    color:#00a862;
    border:none;
    padding:6px 12px;
    border-radius:8px;
    cursor:pointer;
  ">View Cart</button>
</div>

<script src="script.js"></script>

<script type="module">
import { auth } from "./firebase.js";
import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

onAuthStateChanged(auth, (user) => {
  if (!user) window.location.href = "login.html";
});
</script>

</body>
</html>
